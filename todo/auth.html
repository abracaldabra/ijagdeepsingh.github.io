<html>
  <head>
    <meta http-equiv="cache-control" content="no-cache">
    <script>
    (function(){
      // First, parse the query string
      var params = {}, queryString = location.hash.substring(1),
          regex = /([^&=]+)=([^&]*)/g, m;
      while (m = regex.exec(queryString)) {
        params[decodeURIComponent(m[1])] = decodeURIComponent(m[2]);
      }

      // Check if query contains any error messages
      // If yes then redirect to an error page
      if(typeof(params['error']) !== 'undefined'){
        // Access denied
        console.log(typeof(params['error']));
        window.location = params['state'] + '#/errorlogin/200';
      } else {
          if(typeof(Storage)!=="undefined"){
            // Clear old data stored in localstorage
            window.localStorage.clear();
            // Put the object into storage
            window.localStorage.setItem('access_token', JSON.stringify(params));
            // Retrieve the object from storage
            var access_token = window.localStorage.getItem('access_token');
            console.log('access_token: ', JSON.parse(access_token));
            window.location = params['state'] + '#/home';
          } else{
            // Browser doesn't support local storage
            window.location = params['state'] + '#errorlogin/201';
          }
        }

    })();
    </script>
  </head>
  <body>
  </body>
</html>